<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="../build/yespix.js"></script>
	<script type="text/javascript" src="lib/shifty.min.js"></script>
</head>
<body style="background-color: #456;">

<canvas width="800" height="500" id="canvas" style="border: 10px solid #123;"></canvas>

<script type="text/javascript">
	

	var canvas = document.getElementById('canvas');
	yespix();
	var manager = new yespix.class.gfxManager(canvas);

	for (var t=0; t<1000; t++) {
		new yespix.entity.path({
			aspect: {
				width: yespix.randInt(1,10),
				height: yespix.randInt(1,10),
				alpha: 1.0
			},
			position: {
				x: yespix.randInt(1,300),
				y: yespix.randInt(1,600),
				z: 10
			},
			path: {
				type: 'line',
				lineColor: '#ff0000',
				lineWidth: 3,
				fillColor: '',
				points: {x: 10, y: 10}
			},
			manager: manager
		});
	}

	for (var t=0; t<1000; t++) {
		new yespix.entity.path({
			aspect: {
				width: yespix.randInt(1,10),
				height: yespix.randInt(1,10),
				alpha: 1.0
			},
			position: {
				x: yespix.randInt(300,600),
				y: yespix.randInt(1,600),
				z: 30
			},
			path: {
				type: 'line',
				lineColor: '#00ff00',
				lineWidth: 3,
				fillColor: '',
				points: {x: 10, y: 10}
			},
			manager: manager
		});
	}


console.log('add last');
		new yespix.entity.path({
			aspect: {
				width: 300,
				height: 300,
				alpha: 1.0
			},
			position: {
				x: 150,
				y: 150,
				z: 20
			},
			path: {
				type: 'rect',
				lineColor: '#123456',
				lineWidth: 3,
				fillColor: '#0000ff'
			},
			manager: manager
		});


	var line = null;



			if (line) {
				line.destroy();
				line = null;
//				return;
			}
			
			line = new yespix.entity.path({
				aspect: {
					width: yespix.randInt(1,30)+30,
					height: yespix.randInt(1,30)+30
				},
				position: {
					x: yespix.randInt(1,500),
					y: yespix.randInt(1,500),
					z: 10
				},
				path: {
					type: 'rect',
					lineColor: '#ff0000',
					lineWidth: 3,
					fillColor: '#123456'
				},
				manager: manager
			});


	// create loop
	var loop = new yespix.class.loop(60);
	loop.register(
		function(loop, time) { 
            manager.clear(); // clear canvas
            manager.draw(); // draw debug
            manager.drawFps(time, 60);
		}, 
		function(loop, time) {
/*			if (line) {
				line.destroy();
				line = null;
				return;
			}
			
			line = new yespix.entity.path({
				aspect: {
					width: 50, //yespix.randInt(1,30),
					height: 50, //yespix.randInt(1,30)
					alpha: 1.0
				},
				position: {
					x: 200, //yespix.randInt(1,600),
					y: 200, //yespix.randInt(1,600),
					z: 100
				},
				path: {
					type: 'rect',
					lineColor: '#ff0000',
					lineWidth: 3,
					fillColor: '#123456'
				},
				manager: manager
			});*/
		}
	).start();


//console.log(manager.list);


</script>

</body>
</html>
