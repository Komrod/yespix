<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="../build/yespix.js"></script>
	<script type="text/javascript" src="lib/shifty.min.js"></script>
</head>
<body style="background-color: #456;">

<canvas width="800" height="500" id="canvas" style="border: 10px solid #123;"></canvas>

<script type="text/javascript">
	

	var canvas = document.getElementById('canvas');
	yespix();
	var manager = new yespix.class.gfxManager(canvas);

	new yespix.entity.path({
		aspect: {
			width: 200,
			height: 200,
			alpha: 1.0
		},
		position: {
			x: 100,
			y: 100,
			z: 30
		},
		path: {
			lineWidth: 0,
			fillColor: '#ff0000'
		},
		manager: manager
	});

	var green = new yespix.entity.path({
		aspect: {
			width: 200,
			height: 200,
			alpha: 1.0
		},
		position: {
			x: 150,
			y: 150,
			z: 20
		},
		path: {
			lineWidth: 0,
			fillColor: '#00ff00'
		},
		manager: manager
	});

	new yespix.entity.path({
		aspect: {
			width: 200,
			height: 200,
			alpha: 1.0
		},
		position: {
			x: 200,
			y: 200,
			z: 50
		},
		path: {
			lineWidth: 0,
			fillColor: '#0000ff'
		},
		manager: manager
	});

    var input = new yespix.class.input({mouse: canvas});
    var disabled = false;

    function checkClick() {
		if (!disabled && input.mouseButton('left')) {
			var value = yespix.randInt(0,100);
			green.position.set({z: value});
			console.log('Change z to ', value);
			disabled = true;
			setTimeout(function() { disabled = false; }, 100);
		}
    }

	// create loop
	var loop = new yespix.class.loop(60);
	loop.register(
		function(loop, time) { 
            manager.clear(); // clear canvas
			checkClick();
            manager.draw(); // draw entities
            manager.drawFps(time, 60); // draw FPS
		},
		function(loop, time) {
		}
	).start();


</script>

</body>
</html>
