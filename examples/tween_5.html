<!DOCTYPE html>
<html style="height: 100%;">
<head>
	<script type="text/javascript" src="../build/yespix.js"></script>
	<script type="text/javascript" src="lib/shifty.min.js"></script>
</head>
<body style="background-color: #456; margin: 0; padding: 0; min-height: 100%; overflow: hidden;">

<canvas width="800" height="600" id="canvas" style="padding: 0; margin: 0;"></canvas>

<script type="text/javascript">
	
	var height = document.body.clientHeight;
	var width = document.body.clientWidth;

	document.getElementById('canvas').width = width;
	document.getElementById('canvas').height = height;

	var canvas = document.getElementById('canvas');
	yespix();
	var manager = new yespix.class.gfxManager(canvas);


	for (var t=0; t<1000; t++) {
		createRect();
	}

	function createRect() {
		var rectSize = yespix.randInt(10, 150);
		var obj = new yespix.entity.path({
			aspect: {
				width: rectSize,
				height: rectSize,
			},
			position: {
				x: yespix.randInt(-200, width+200),
				y: -200,
				z: rectSize,
				rotation: yespix.randInt(0, 360)
			},
			event: false,
			tween:
			{
				delay: 1000 + yespix.randInt(0,5200),
				duration: 3000 - rectSize*15,
				easing: 'easeIn',
				to: {
					position: { y: height+100  },
					path : { fillColor: '#ffeb3b' }
				},
				onEnd: function() {
					this.entity.destroy();
					createRect();
				}
			},
			path: {
				type: 'rect',
				lineWidth: 0,
				fillColor: '#ff0000'
			},
			manager: manager
		});
	}

	// create loop
	var loop = new yespix.class.loop(30);
	loop.register(
		function(loop, time) { 
            manager.clear(); // clear canvas
            manager.draw(); // draw
            manager.drawFps(time, 60);
		}, 
		function(loop, time) {
            manager.step(time); // step
		}
	).start();


//console.log(manager.list);


</script>

</body>
</html>
