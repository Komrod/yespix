<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="../build/yespix.js"></script>
	<script type="text/javascript" src="lib/Box2d.min.js"></script>
</head>
<body style="background-color: #DBC1B1;">

<canvas width="800" height="500" id="canvas" style="border: 10px solid #ff0000;"></canvas>

<script type="text/javascript">
	

	var game = new yespix.class.game({
		fps: 60,	
		canvas: 'canvas',
		debug: true,
		physics: true,
		input: true
	});


	new yespix.entity.text({
		position: {
			x: 200,
			y: 30
		},
		text: {
			content: 'ok',
			fillColor: '#000',
			size: 30
		},
		manager: game.gfxManager
	}).when('render', function(event) {
		event.entity.text.content = 'Entity count: '+game.gfxManager.list.length;
	});


	game.input.when('click', function(e) {
		for (var t=0; t<20; t++) {
			var size = yespix.randInt(5,20);
			new yespix.entity.path({
				aspect: {
					
					width: size,
					height: size
				},
				position: {
					x: yespix.randInt(100, 650),
					y: yespix.randInt(-20, 400)
				},
				path: {
					type: 'rect',
					lineColor: '#000',
					lineWidth: 1,
					fillColor: yespix.rgbToHex({r: yespix.randInt(0,255), g: yespix.randInt(0,255), b: yespix.randInt(0,255)})
				},
				collision: {
					width: size,
					height: size,
					restitution: 0.9,
					physics: game.physics
				},
				manager: game.gfxManager
			}).when('change', function(event) {
				if (event.entity.position.y>500) {
					event.entity.destroy();
				}
			});
		}
	});


	new yespix.entity.path({
		aspect: {
			alpha: 1.0,
			width: 700,
			height: 10
		},
		position: {
			x: 50,
			y: 450
		},
		path: {
			type: 'rect',
			lineColor: '#000',
			lineWidth: 1,
			fillColor: '#000',
		},
		collision: {
			type: 'static',
			width: 700,
			height: 10,
			physics: game.physics
		},
		manager: game.gfxManager
	});
	new yespix.entity.path({
		aspect: {
			width: 10,
			height: 400
		},
		position: {
			x: 50,
			y: 50
		},
		path: {
			type: 'rect',
			lineColor: '#000',
			lineWidth: 1,
			fillColor: '#000',
			fillAlpha: 1 // 0.5
		},
		collision: {
			type: 'static',
			width: 10,
			height: 450,
			physics: game.physics
		},
		manager: game.gfxManager
	});
	new yespix.entity.path({
		aspect: {
			width: 10,
			height: 400
		},
		position: {
			x: 740,
			y: 50
		},
		path: {
			type: 'rect',
			lineColor: '#000',
			lineWidth: 1,
			fillColor: '#000',
			fillAlpha: 1 // 0.5
		},
		collision: {
			type: 'static',
			width: 10,
			height: 450,
			physics: game.physics
		},
		manager: game.gfxManager
	});



</script>
</body>
</html>
